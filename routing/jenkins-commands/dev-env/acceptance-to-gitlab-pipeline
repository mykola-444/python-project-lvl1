#!groovy

parallel worldBranch: {
    stage ("Adapt platform (HMC+) data: world") {
        build job: "run-olp-adapter-dev",
        parameters: [
            string(name: "MITF_GERRIT_REFSPEC", value: "${MITF_GERRIT_REFSPEC}"),
            string(name: "HRN", value: "hrn:here:data::olp-here:hmc-world-services-2"),
            string(name: "HMC_VERSION", value: "${HMC_VERSION}")
        ],
        wait: true
    }
    stage ("Generate geo locations: world") {
        build job: "generate-test-cases-dev",
        parameters: [
            string(name: "DESCRIPTION", value: "world"),
            string(name: "LDM_REGION_DVN", value: "HMC_${HMC_VERSION}"),
            string(name: "MITF_GERRIT_REFSPEC", value: "${MITF_GERRIT_REFSPEC}"),
            string(name: "DESIRED_TC_QTY", value: "10"),
            string(name: "TARGET", value: "world"),
            string(name: "MODE", value: "research"),
            string(name: "SUCCESS_GEO_NODES_RUNNER", value: "sgn_generate"),
            booleanParam(name: "USE_CACHE", value: true),
            string(name: "CONFIG_TEMPLATE", value: "hmc_config_example.cfg"),
            booleanParam(name: "LOCAL_RUN", value: true)
        ]
    }
}, japanBranch: {
    stage ("Adapt platform (HMC+) data: japan") {
        build job: "run-olp-adapter-japan-dev",
        parameters: [
            string(name: "MITF_GERRIT_REFSPEC", value: "${MITF_GERRIT_REFSPEC}"),
            string(name: "HRN", value: "hrn:here:data::olp-here:hmc-world-services-2"),
            string(name: "HMC_VERSION", value: "${HMC_VERSION}")
        ],
        wait: true
    }
    stage ("Generate geo locations: japan") {
        build job: "generate-test-cases-dev",
        parameters: [
            string(name: "DESCRIPTION", value: "japan"),
            string(name: "LDM_REGION_DVN", value: "HMC_${HMC_VERSION}"),
            string(name: "MITF_GERRIT_REFSPEC", value: "${MITF_GERRIT_REFSPEC}"),
            string(name: "DESIRED_TC_QTY", value: "10"),
            string(name: "TARGET", value: "japan"),
            string(name: "MODE", value: "research"),
            string(name: "SUCCESS_GEO_NODES_RUNNER", value: "sgn_generate"),
            booleanParam(name: "USE_CACHE", value: true),
            string(name: "CONFIG_TEMPLATE", value: "hmc_config_example.cfg"),
            booleanParam(name: "LOCAL_RUN", value: true)
        ]
    }
 }
